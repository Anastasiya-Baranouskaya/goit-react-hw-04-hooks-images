{"version":3,"sources":["services/api.js","components/Searchbar.js","components/ImageGalleryItem.js","components/Button.js","components/ImageGallery.js","components/Modal.js","components/Loader.js","App.js","index.js"],"names":["base_url","api_key","value","page","a","url","fetch","r","json","data","hits","message","Searchbar","clearRender","onValueSubmit","onPageSubmit","useState","valueSearch","setValueSearch","pageCurrent","setPageCurrent","className","onSubmit","e","preventDefault","trim","toast","error","type","onChange","target","toLowerCase","autoComplete","autoFocus","placeholder","ImageGalleryItem","onClose","largeImageURL","webformatURL","onClick","src","alt","Button","ImageGallery","arr","handleClick","map","id","length","modalRoot","document","querySelector","Modal","useEffect","addEventListener","handleKeyDown","removeEventListener","code","createPortal","currentTarget","LoaderSpin","color","height","width","timeout","App","setValue","setPage","setArr","status","setStatus","showModal","setShowModal","setLargeImageURL","fetchImages","then","prev","warn","catch","err","console","log","finally","windowScroll","window","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","theme","autoClose","prevPage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f0937799.chunk.js","sourcesContent":["const base_url = `https://pixabay.com/api/`;\nconst api_key = `23089683-10e6383e94187ff47334541d4`;\n\nexport default async function fetchImages(value, page) {\n  // console.log('page in API:', page);\n  let url = `${base_url}?q=${value}&page=${page}&key=${api_key}&image_type=photo&orientation=horizontal&per_page=12`;\n  try {\n    const r = await fetch(url);\n    const data = await r.json();\n    return data.hits;\n  } catch (err) {\n    return err.message;\n  }\n}\n","import { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nexport default function Searchbar({\n  clearRender,\n  onValueSubmit,\n  onPageSubmit,\n}) {\n  const [valueSearch, setValueSearch] = useState('');\n  const [pageCurrent, setPageCurrent] = useState(1);\n\n  const handleChange = e => {\n    setValueSearch(e.target.value.toLowerCase());\n    setPageCurrent(1);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (valueSearch.trim() === '') {\n      toast.error('Введите корректное название!');\n      clearRender();\n      return;\n    }\n    onValueSubmit(valueSearch);\n    setValueSearch('');\n    onPageSubmit(pageCurrent);\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleSubmit}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          value={valueSearch}\n          onChange={handleChange}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  onClose,\n  largeImageURL,\n  webformatURL,\n}) {\n  return (\n    <li className=\"ImageGalleryItem\" onClick={() => onClose(largeImageURL)}>\n      <img\n        src={webformatURL}\n        data-source={largeImageURL}\n        alt=\"pictures\"\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <div className=\"Button-div\">\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\n        LoadMore\n      </button>\n    </div>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Button from './Button';\n\nexport default function ImageGallery({ arr, onClose, handleClick }) {\n  return (\n    <>\n      <ul className=\"ImageGallery\">\n        {arr.map(({ id, webformatURL, largeImageURL }) => (\n          <ImageGalleryItem\n            key={id}\n            webformatURL={webformatURL}\n            largeImageURL={largeImageURL}\n            onClose={onClose}\n          />\n        ))}\n      </ul>\n      {arr.length % 12 === 0 && <Button onClick={handleClick} />}\n    </>\n  );\n}\n\nImageGallery.propTypes = {\n  arr: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  handleClick: PropTypes.func.isRequired,\n};\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ onClose, largeImageURL }) {\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  });\n\n  const handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  };\n\n  const handleOverlayClick = e => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={handleOverlayClick}>\n      <div className=\"Modal\">\n        <img src={largeImageURL} alt={largeImageURL} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\nModal.propTypes = {\n  largeImageURL: PropTypes.string.isRequired,\n};\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default function LoaderSpin() {\n  return (\n    <Loader\n      type=\"Circles\"\n      color=\"#3f51b5\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  );\n}\n","import './App.css';\nimport './components/styles.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useState, useEffect } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\nimport fetchImages from './services/api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport LoaderSpin from './components/Loader';\n\nexport default function App() {\n  const [value, setValue] = useState('');\n  const [page, setPage] = useState(1);\n  const [arr, setArr] = useState('');\n  const [status, setStatus] = useState('idle');\n  const [showModal, setShowModal] = useState(false);\n  const [largeImageURL, setLargeImageURL] = useState('');\n\n  useEffect(() => {\n    if (!value) return;\n    setStatus('pending');\n    fetchImages(value, page)\n      .then(data => {\n        if (data.length !== 0) {\n          page === 1 ? setArr(data) : setArr(prev => [...prev, ...data]);\n          setStatus('resolved');\n          return;\n        }\n        toast.warn('Изображений с таким названием не найдено');\n        setStatus('idle');\n      })\n      .catch(err => {\n        console.log(err);\n        setStatus('error');\n      })\n      .finally(() => {\n        windowScroll();\n      });\n  }, [value, page]);\n\n  const windowScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const toggleModal = largeImageURL => {\n    setShowModal(!showModal);\n    setLargeImageURL(largeImageURL);\n  };\n\n  const clearRender = () => {\n    setStatus('idle');\n  };\n\n  const handleClick = () => {\n    setPage(prevPage => prevPage + 1);\n\n    console.log('arr in HandleClick:', arr);\n    console.log('page in handleClick:', page);\n  };\n\n  return (\n    <div>\n      <Searchbar\n        onValueSubmit={setValue}\n        clearRender={clearRender}\n        onPageSubmit={setPage}\n      />\n      <ToastContainer theme=\"colored\" autoClose={2000} />\n      {status === 'idle' && <p>Начните поиск изображений</p>}\n\n      {status === 'pending' && (\n        <div className=\"Loader\">\n          <LoaderSpin />\n        </div>\n      )}\n\n      {status === 'resolved' && (\n        <ImageGallery\n          arr={arr}\n          handleClick={handleClick}\n          onClose={toggleModal}\n        />\n      )}\n\n      {showModal && (\n        <Modal onClose={toggleModal} largeImageURL={largeImageURL} />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}